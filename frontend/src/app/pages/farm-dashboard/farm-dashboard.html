<div class="dashboard-container">
  <!-- Header Section -->
  <div class="dashboard-header">
    <div class="header-content">
      <div class="header-left-section">
        <h1 class="dashboard-title">
          {{ showDashboardOverview ? 'Dashboard Overview' : 'Projects' }}
        </h1>
        <button
          *ngIf="showDashboardOverview"
          class="btn-back"
          (click)="hideDashboard()"
          title="Back to Projects"
        >
          <i class="fas fa-arrow-left"></i>
          Back to Projects
        </button>
      </div>
      <div class="header-actions">
        <button
          class="btn-create-new-project"
          routerLink="/projects/new"
        >
          <i class="fas fa-plus-circle"></i>
          Create New Project
        </button>
        <button
          *ngIf="!showDashboardOverview"
          class="btn-view-dashboard"
          (click)="showDashboard()"
        >
          <i class="fas fa-chart-pie"></i>
          Dashboard Overview
        </button>
        <button class="btn-refresh" (click)="refreshDashboard()" [disabled]="isLoading || isLoadingProjects">
          <i class="fas fa-sync-alt" [class.spinning]="isLoading || isLoadingProjects"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="showEmptyState && !isLoading">
    <div class="empty-state-illustration">
      <i class="fas fa-seedling"></i>
    </div>
    <h2 class="empty-state-title">No Projects Yet</h2>
    <p class="empty-state-message">
      Start by creating your first farm or landscaping project!
    </p>
    <button class="btn-primary btn-large" routerLink="/projects/new">
      <i class="fas fa-plus"></i>
      Create First Project
    </button>
  </div>

  <!-- Dashboard Overview Component -->
  <app-dashboard-overview
    *ngIf="showDashboardOverview && !showEmptyState"
    (metricClick)="onMetricCardClick($event)"
    (chartSelect)="onChartSelect($event)"
  ></app-dashboard-overview>

  <!-- Project List Component -->
  <app-project-list
    *ngIf="showProjectsList"
    [showToolbar]="true"
    [showSummaryStats]="false"
    [defaultViewMode]="currentView"
    [initialFilters]="activeFilters"
    (projectClick)="viewProject($event.id)"
    (favoriteToggle)="handleFavoriteToggle($event)"
  ></app-project-list>

  <!-- Floating Action Button -->
  <button class="fab" (click)="createNewProject()" title="Create New Project">
    <i class="fas fa-plus"></i>
  </button>
</div>

<!-- Skeleton Loaders Templates -->
<ng-template #skeleton>
  <div class="skeleton-loader skeleton-stat"></div>
</ng-template>

<ng-template #chartSkeleton>
  <div class="skeleton-loader skeleton-chart"></div>
</ng-template>

<ng-template #activitiesSkeleton>
  <div class="skeleton-loader skeleton-activity" *ngFor="let i of [1,2,3,4,5]"></div>
</ng-template>
